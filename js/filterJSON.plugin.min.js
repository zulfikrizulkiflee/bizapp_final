/*
 * jQuery Filter JSON Plugin
 * Copyright (c) 2012 Kapil Kashyap
 *
 * Depends:
 *   - jQuery 1.6+
 *
 * Dual licensed under the MIT and GPL licenses:
 *   - http://www.opensource.org/licenses/mit-license.php
 *   - http://www.gnu.org/licenses/gpl.html
 */
!function(r){r.extend(r.fn,{filterJSON:function(e,t){var o={STRING:"[object String]",NUMBER:"[object Number]",BOOLEAN:"[object Boolean]",ARRAY:"[object Array]",OBJECT:"[object Object]",FUNCTION:"[object Function]"},i=function(r){return Object.prototype.toString.call(r)},a={property:null,value:"",wrapper:!1,checkContains:!1,startsWith:!1,matchCase:!1,avoidDuplicates:!1,sort:!1,sortOrder:"asc",sortProperty:null,sortEmptyString:!1,comparator:function(r,e){var t="asc"!==a.sortOrder?-1:1,o=a.sortProperty||a.property[0]||a.property,r=r[o]||r,e=e[o]||e;return r=r.trim(),e=e.trim(),a.sortEmptyStrings||""!==r&&""!==e?e>r?-1*t:r>e?1*t:0:0}},n=function(e,t){var a=null;return(r.isEmptyObject(t.property)||!t.property[0])&&(a="config.property is required to filter the JSON object."),r.isEmptyObject(a)?(e&&"object"==typeof e&&r.each(e,function(a,l){if(-1!=r.inArray(a,t.property)){var p=function(e,o){var i=t.wrapper?e:o;t.avoidDuplicates?-1==r.inArray(i,s.filteredJSON)&&s.filteredJSON.push(i):s.filteredJSON.push(i)};if(t.value){var c=r.isArray(t.value)?t.value:[t.value],f={},u=i(l),O=function(a,s,l){if(a===o.STRING){var c=s.toLowerCase(),u=l.toLowerCase();t.matchCase?(s==l||!t.startsWith&&t.checkContains&&-1!=s.indexOf(l)||t.startsWith&&0==s.indexOf(l))&&p(e,s):(c==u||!t.startsWith&&t.checkContains&&-1!=c.indexOf(u)||t.startsWith&&0==c.indexOf(u))&&p(e,s)}else if(a===o.NUMBER)(s===parseInt(l)||s===parseFloat(l))&&p(e,s);else if(a===o.BOOLEAN){var d=!1;i(l)===o.STRING&&"true"==l.toLowerCase()&&(d=!0),s===d&&p(e,s)}else if(a===o.ARRAY){if(s.length>0)for(k in s)O(i(s[k]),s[k],l)}else a===o.OBJECT&&(r.extend(f,t,{value:l}),n(s,f))};if(c.forEach)c.forEach(function(r){O(u,l,r)});else for(k in c)c.hasOwnProperty(k)&&O(u,l,c[k])}else p(e,l)}n(l,t)}),s):void(window.console?console.error?console.error(a):console.log(a):alert(a))},s={filteredJSON:[]},l=null,p=null,c=null,f=!1;return r.extend(a,t),c=a.property,i(c)===o.STRING&&(c=c.replace(/\s/g,""),a.property=c.split(",")),c=null,a.wrapper&&a.property&&a.property.length>1&&void 0==t.avoidDuplicates&&(a.avoidDuplicates=!0),l=n(e,a),l&&l.filteredJSON&&(p=l.filteredJSON.length>0?l.filteredJSON:l.filteredJSON[0]),a.sort&&i(p)===o.ARRAY&&(a.comparator&&i(a.comparator)===o.FUNCTION&&i(p[0])===o.OBJECT&&(p.sort(a.comparator),f=!0),!f&&p.sort(a.comparator)),r(p)}})}(jQuery);